---
import { Icon } from "astro-icon/components";
---

<nav class="mx-auto flex h-16 max-w-6xl items-center justify-between gap-4 px-4 py-4">
  <!-- Theme Switcher -->
  <button
    id="theme-toggle"
    type="button"
    class="inline-flex size-12 items-center justify-center rounded-xl border-2 border-neutral-300 dark:border-neutral-700 bg-neutral-100/30 dark:bg-neutral-800/30 transition-all hover:border-orange-500 hover:bg-neutral-100 dark:hover:bg-neutral-800"
    aria-label="Toggle theme"
  >
    <Icon name="lucide:sun" class="size-5 dark:hidden" />
    <Icon name="lucide:moon" class="hidden size-5 dark:block" />
  </button>

  <!-- Desktop Social Links -->
  <div class="hidden items-center gap-4 md:flex">
    <a
      href="https://github.com/Otisz"
      target="_blank"
      rel="noreferrer"
      class="inline-flex size-12 items-center justify-center rounded-xl border-2 border-neutral-300 dark:border-neutral-700 bg-neutral-100/30 dark:bg-neutral-800/30 transition-all hover:border-orange-500 hover:bg-neutral-100 dark:hover:bg-neutral-800"
      aria-label="Check out my GitHub"
      title="Check out my GitHub"
    >
      <Icon name="simple-icons:github" class="size-6" />
    </a>
    <a
      href="https://www.linkedin.com/in/leventeotta/"
      target="_blank"
      rel="noreferrer"
      class="inline-flex size-12 items-center justify-center rounded-xl border-2 border-neutral-300 dark:border-neutral-700 bg-neutral-100/30 dark:bg-neutral-800/30 transition-all hover:border-orange-500 hover:bg-neutral-100 dark:hover:bg-neutral-800"
      aria-label="Visit my LinkedIn"
      title="Visit my LinkedIn"
    >
      <Icon name="simple-icons:linkedin" class="size-6" />
    </a>
    <a
      href="https://assets.leventeotta.com/documents/Levente%20Otta%20CV.pdf"
      target="_blank"
      rel="noreferrer"
      class="inline-flex size-12 items-center justify-center rounded-xl border-2 border-neutral-300 dark:border-neutral-700 bg-neutral-100/30 dark:bg-neutral-800/30 transition-all hover:border-orange-500 hover:bg-neutral-100 dark:hover:bg-neutral-800"
      aria-label="Download my CV"
      title="Download my CV"
    >
      <Icon name="lucide:file-text" class="size-6" />
    </a>
  </div>

  <!-- Mobile Menu Button -->
  <button
    id="mobile-menu-toggle"
    type="button"
    class="inline-flex size-12 items-center justify-center rounded-xl border-2 border-neutral-300 dark:border-neutral-700 bg-neutral-100/30 dark:bg-neutral-800/30 transition-all hover:border-orange-500 hover:bg-neutral-100 dark:hover:bg-neutral-800 md:hidden"
    aria-label="Open menu"
    aria-expanded="false"
  >
    <Icon name="lucide:menu" class="size-6" />
  </button>
</nav>

<!-- Mobile Menu Overlay -->
<div
  id="mobile-menu"
  class="fixed inset-0 z-50 hidden bg-neutral-50 dark:bg-neutral-900"
>
  <div class="flex h-16 items-center justify-between px-4">
    <span class="text-xl font-bold">Menu</span>
    <button
      id="mobile-menu-close"
      type="button"
      class="inline-flex size-12 items-center justify-center rounded-xl border-2 border-neutral-300 dark:border-neutral-700 bg-neutral-100/30 dark:bg-neutral-800/30 transition-all hover:border-orange-500 hover:bg-neutral-100 dark:hover:bg-neutral-800"
      aria-label="Close menu"
    >
      <Icon name="lucide:x" class="size-6" />
    </button>
  </div>

  <div class="flex flex-col gap-4 p-4">
    <a
      href="https://assets.leventeotta.com/documents/Levente%20Otta%20CV.pdf"
      target="_blank"
      rel="noreferrer"
      class="flex items-center justify-center gap-3 rounded-xl border-2 border-orange-500 p-4 text-orange-500 transition-all hover:bg-neutral-100 dark:hover:bg-neutral-800"
      aria-label="Download my CV"
    >
      <Icon name="lucide:file-text" class="size-6" />
      <span class="font-medium">Download CV</span>
    </a>

    <div class="grid grid-cols-2 gap-4">
      <a
        href="https://github.com/Otisz"
        target="_blank"
        rel="noreferrer"
        class="flex items-center justify-center gap-3 rounded-xl border-2 border-neutral-300 dark:border-neutral-700 p-4 transition-all hover:border-orange-500 hover:bg-neutral-100 dark:hover:bg-neutral-800"
        aria-label="Check out my GitHub"
      >
        <Icon name="simple-icons:github" class="size-8" />
      </a>
      <a
        href="https://www.linkedin.com/in/leventeotta/"
        target="_blank"
        rel="noreferrer"
        class="flex items-center justify-center gap-3 rounded-xl border-2 border-neutral-300 dark:border-neutral-700 p-4 transition-all hover:border-orange-500 hover:bg-neutral-100 dark:hover:bg-neutral-800"
        aria-label="Visit my LinkedIn"
      >
        <Icon name="simple-icons:linkedin" class="size-8" />
      </a>
    </div>
  </div>
</div>

<script>
  // Theme toggle
  const themeToggle = document.getElementById("theme-toggle");
  const html = document.documentElement;

  // Check for saved theme or system preference
  const getTheme = () => {
    const saved = localStorage.getItem("theme");
    if (saved) return saved;
    return window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
  };

  // Apply theme
  const applyTheme = (theme: string) => {
    if (theme === "dark") {
      html.classList.add("dark");
    } else {
      html.classList.remove("dark");
    }
    localStorage.setItem("theme", theme);
  };

  // Initialize
  applyTheme(getTheme());

  // Toggle
  themeToggle?.addEventListener("click", () => {
    const current = html.classList.contains("dark") ? "dark" : "light";
    applyTheme(current === "dark" ? "light" : "dark");
  });

  // Mobile menu
  const mobileMenuToggle = document.getElementById("mobile-menu-toggle");
  const mobileMenuClose = document.getElementById("mobile-menu-close");
  const mobileMenu = document.getElementById("mobile-menu");

  mobileMenuToggle?.addEventListener("click", () => {
    mobileMenu?.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  });

  mobileMenuClose?.addEventListener("click", () => {
    mobileMenu?.classList.add("hidden");
    document.body.style.overflow = "";
  });

  // Close menu when clicking a link
  mobileMenu?.querySelectorAll("a").forEach((link) => {
    link.addEventListener("click", () => {
      mobileMenu.classList.add("hidden");
      document.body.style.overflow = "";
    });
  });
</script>
